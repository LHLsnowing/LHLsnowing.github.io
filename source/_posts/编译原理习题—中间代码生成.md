---
title: 编译原理习题—中间代码生成
date: 2023-05-25 23:42:02
tags:   中间代码生成
categories: [编译原理,习题]
---

# 编译原理中间代码生成例题
## 例题1
语句：`if A and B and C>D then if A<B then F=1; else F=0; else G=G+1;`
按照条件和赋值的翻译过程将上面的语句翻译成中间代码（用三地址码或四元式都可以）。

- 解答
**中间代码（三地址码）：**

```
1. t1 = A and B and C>D
2. if t1 goto 4
3. G = G + 1
4. t2 = A < B
5. if t2 goto 7
6. F = 0
7. F = 1
```
**中间代码（四元式）：**

```
1. (and, A, B, t1)
2. (>, C, D, t2)
3. (and, t1, t2, t3)
4. (if_true, t3, _, 7)
5. (add, G, 1, G)
6. (goto, _, _, 8)
7. (if_false, t3, _, 9)
8. (assign, 0, _, F)
9. (assign, 1, _, F)
```

---
## 例题2
语句：`while a>b do if c==5 then while x<y do x=x+1; else x=y;`
按照条件和赋值的翻译过程将上面的语句翻译成中间代码（用三地址码或四元式都可以）。

**中间代码（三地址码）：**

```
1. label1: if a > b goto 2
2. t1 = c == 5
3. if t1 goto 5
4. goto 9
5. label2: if x < y goto 6
7. goto 4
6. x = x + 1;
8. goto 5
9. t2 = x if y
10. x = t2 
```
**中间代码（四元式）：**

```
1. (label, _, _, label1)
2. (>, a, b, t1)
3. (if_true, t1, _, 4)
4. (goto, _, _, label2)
5. (==, c, 5, t2)
6. (if_true, t2, _, 8)
7. (goto, _, _, 3)
8. (label, _, _, label2)
9. (<, x, y, t3)
10. (if_true, t3, _, 11)
11. (goto, _, _, 7)
12. (add, x, 1, t4)
13. (assign, t4, _, x)
14. (goto, _, _, 9)
```
---
## 例题3
针对如下三地址码
```
    j=0
L1：i=0
    if i<8 goto L3
L2：a=b+c
    b=d*c
L3：if b==0 goto L4
    b=a+b
    goto L5
L4：i=i+1
    if i<8 goto L2
L5：j=j+1
    if j<=3 goto L1
    b=8
```
（1）划分出基本块
（2）绘制程序的流程图（流图）
（3）求出流图中各结点的必经结点集（支配节点集）
（4）找出流图中的回边，给出回边对应的循环结点（自然循环）

**(1) 基本块划分：**
```
基本块1：j=0
基本块2：
L1：i=0
   if i<8 goto L3
基本块3：
L2：a=b+c
   b=d*c
基本块4：
L3：if b==0 goto L4
   b=a+b
   goto L5
基本块5：
L4：i=i+1
   if i<8 goto L2
基本块6：
L5：j=j+1
   if j<=3 goto L1
   b=8
```
**(2) 程序的流程图：**
结合（1）大概是这样

```
   +-----+     +-----+
   |  1  |---->|  2  |
   +-----+     +-----+
      ^           |
      |           v
   +-----+     +-----+
   |  3  |---->|  4  |
   +-----+     +-----+
      ^           |
      |           v
   +-----+     +-----+
   |  5  |     |  6  |
   +-----+     +-----+
```

**(3) 流图中各结点的必经结点集：**
>B1: {B1}
B2: {B1, B2}
B3: {B1, B2, B3}
B4: {B1, B2, B3, B4}
B5: {B1, B2, B3, B5}
B6: {B1, B2, B3, B6}

**(4) 回边对应的循环结点：**
>回边：B5 -> B2
循环结点：{B2, B3, B4, B5} （自然循环）